From a9f217bf09f9b82659bb5f330a26e2f1b51e6d7a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20K=2E=20H=C3=BCttel?= <dilfridge@gentoo.org>
Date: Tue, 12 May 2020 23:46:17 +0300
Subject: [PATCH 12/12] [no-patch] Gentoo: remove etc files, now in FILESDIR

---
 scripts/gentoo/extra/.keep         |  0
 scripts/gentoo/extra/etc/host.conf | 24 ---------
 scripts/gentoo/extra/etc/nscd      | 85 ------------------------------
 3 files changed, 109 deletions(-)
 create mode 100644 scripts/gentoo/extra/.keep
 delete mode 100644 scripts/gentoo/extra/etc/host.conf
 delete mode 100644 scripts/gentoo/extra/etc/nscd

diff --git a/scripts/gentoo/extra/.keep b/scripts/gentoo/extra/.keep
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/scripts/gentoo/extra/etc/host.conf b/scripts/gentoo/extra/etc/host.conf
deleted file mode 100644
index 4c58e52d6b..0000000000
--- a/scripts/gentoo/extra/etc/host.conf
+++ /dev/null
@@ -1,24 +0,0 @@
-# /etc/host.conf:
-# $Header: /var/cvsroot/gentoo/src/patchsets/glibc/extra/etc/host.conf,v 1.1 2006/09/29 23:52:23 vapier Exp $
-
-# The  file /etc/host.conf contains configuration information specific to
-# the resolver library.  It should contain one configuration keyword  per
-# line,  followed by appropriate configuration information.  The keywords
-# recognized are order, trim, mdns, multi, nospoof, spoof, and reorder.
-
-
-
-# This keyword specifies how host lookups are to be performed. It
-# should be followed by one or more lookup methods, separated by
-# commas.  Valid methods are bind, hosts, and nis.
-#
-order hosts, bind
-
-
-# Valid  values are on and off.  If set to on, the resolv+ library
-# will return all valid addresses for a host that appears  in  the
-# /etc/hosts  file,  instead  of  only  the first.  This is off by
-# default, as it may cause a substantial performance loss at sites
-# with large hosts files.
-#
-multi off
diff --git a/scripts/gentoo/extra/etc/nscd b/scripts/gentoo/extra/etc/nscd
deleted file mode 100644
index abe31f892d..0000000000
--- a/scripts/gentoo/extra/etc/nscd
+++ /dev/null
@@ -1,85 +0,0 @@
-#!/sbin/openrc-run
-# Copyright 1999-2017 Gentoo Foundation
-# Distributed under the terms of the GNU General Public License v2
-
-description="The 'Name Service Cache Daemon' is a daemon that provides a cache"
-description="${description} for the most common name service requests"
-
-extra_started_commands="flush_all flush_hosts flush_group flush_passwd flush_netgroup flush_services"
-
-description_flush_all="Will invalidate hosts, group, passwd, netgroup and services cache"
-description_flush_hosts="Will invalidate hosts cache"
-description_flush_group="Will invalidate group cache"
-description_flush_passwd="Will invalidate passwd cache"
-description_flush_netgroup="Will invalidate netgroup cache"
-description_flush_services="Will invalidate services cache"
-
-pidfile="/run/nscd/nscd.pid"
-command="/usr/sbin/nscd"
-
-depend() {
-	use dns ldap net slapd logger
-}
-
-checkconfig() {
-	if [ ! -d /run/nscd ] ; then
-		checkpath -d -m 755 /run/nscd
-	fi
-
-	if [ -z "${NSCD_PERMS_OK}" ] && [ "$(stat -c %a /run/nscd)" != "755" ] ; then
-		ewarn "nscd run dir is not world readable, you should reset the perms:"
-		ewarn "chmod 755 /run/nscd"
-		ewarn "chmod a+rw /run/nscd/socket"
-		ewarn "To disable this warning, set 'NSCD_PERMS_OK' in /etc/conf.d/nscd"
-	fi
-
-	if grep -qs '^[[:space:]]*persistent\>' /etc/nscd.conf ; then
-		checkpath -d -m 700 /var/db/nscd
-	fi
-}
-
-_flush() {
-	local table=$1
-
-	ebegin "Flushing ${table} table"
-	${command} --invalidate ${table}
-	eend $?
-}
-
-flush_all() {
-	local has_errors=0
-
-	ebegin "Flushing all caches"
-
-	local table=
-	for table in passwd group hosts netgroup services; do
-		${command} --invalidate ${table}
-		[ $? -ne 0 ] && has_errors=1
-	done
-
-	eend ${has_errors}
-}
-
-flush_hosts() {
-	_flush hosts
-}
-
-flush_group() {
-	_flush group
-}
-
-flush_passwd() {
-        _flush passwd
-}
-
-flush_netgroup() {
-	_flush netgroup
-}
-
-flush_services() {
-	_flush services
-}
-
-start_pre() {
-	checkconfig
-}
-- 
2.26.2

